(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{yPrK:function(e,t,n){"use strict";n.r(t),n.d(t,"SettingsPageModule",function(){return b});var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),c=n("fXoL"),s=n("IRyT"),l=n("m/P+"),u=function(){return["/intro"]},h=function(){return["/purchases"]},p=[{path:"",component:function(){function e(e,t,n,o){var i=this;this.plt=e,this.accountService=t,this.alertCtrl=n,this.iab=o,this.user={},this.accountService.getUserData().subscribe(function(e){i.user=e})}return e.prototype.ngOnInit=function(){},e.prototype.openRate=function(){this.plt.is("ios")?this.iab.create("https://apps.apple.com/us/app/","_system"):this.iab.create("https://play.google.com/store/apps/details?id=com.healthandsafetystories.app","_system")},e.prototype.openFollow=function(){this.iab.create("https://www.facebook.com/Whanauora-599348520177935/","_system")},e.prototype.openEmail=function(){this.iab.create("mailto:tekotukubusiness@gmail.com","_system")},e.prototype.openDisclaimer=function(){this.alertCtrl.create({header:"Disclaimer",message:"The publisher would like to inform the reader that the safety information contained in the Te K\u014dtuku Apps is for education purposes only and intended for children who live in New Zealand. Please consult a health professional to see if the safety information in these apps are correct for you and your child.",buttons:[{text:"Close",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})},e.prototype.openChangePassword=function(){var e=this;this.alertCtrl.create({header:"Change Password",inputs:[{name:"password",placeholder:"Password",type:"password"},{name:"confirmPassword",placeholder:"Confirm Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(t){t.password&&t.confirmPassword&&t.password===t.confirmPassword?e.accountService.changePassword(e.user.email,t.password,t.confirmPassword).then(function(){e.alertCtrl.create({header:"Success",message:"Your password has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while changing your password.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(t){setTimeout(function(){e.openChangePassword()},200)}}]}).then(function(e){e.present()})}):e.alertCtrl.create({header:"Error",message:"Passwords do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(t){setTimeout(function(){e.openChangePassword()},200)}}]}).then(function(e){e.present()})}}]}).then(function(e){e.present()})},e.prototype.openChangeEmail=function(){var e=this;this.alertCtrl.create({header:"Change Email",message:"Your current email is: "+this.user.email,inputs:[{name:"email",placeholder:"New Email",type:"email"},{name:"confirmEmail",placeholder:"Confirm Email",type:"email"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Change",handler:function(t){t.email&&t.confirmEmail&&t.email===t.confirmEmail?e.accountService.changeEmail(t.email).then(function(){e.alertCtrl.create({header:"Success",message:"Your email has been updated",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()}),e.accountService.retreiveUserData().then(function(t){e.user=t})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while changing your email.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(t){setTimeout(function(){e.openChangeEmail()},200)}}]}).then(function(e){e.present()})}):e.alertCtrl.create({header:"Error",message:"Emails do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(t){setTimeout(function(){e.openChangeEmail()},200)}}]}).then(function(e){e.present()})}}]}).then(function(e){e.present()})},e.prototype.openSwitchAccount=function(){var e=this;this.alertCtrl.create({header:"Swtich Accounts",inputs:[{name:"email",placeholder:"Email",type:"email"},{name:"password",placeholder:"Password",type:"password"}],buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Login",handler:function(t){t.email&&t.password?e.accountService.login({email:e.user.email,password:t.password}).then(function(){e.alertCtrl.create({header:"Success",message:"You have switched accounts.",buttons:[{text:"Dismiss",role:"cancel",handler:function(e){}}]}).then(function(e){e.present()})}).catch(function(){e.alertCtrl.create({header:"Error",message:"There was an error while logging in.",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(t){setTimeout(function(){e.openSwitchAccount()},200)}}]}).then(function(e){e.present()})}):e.alertCtrl.create({header:"Error",message:"Emails do not match",buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Try Again",handler:function(t){setTimeout(function(){e.openSwitchAccount()},200)}}]}).then(function(e){e.present()})}}]}).then(function(e){e.present()})},e.prototype.logout=function(){this.accountService.logout()},e.\u0275fac=function(t){return new(t||e)(c.Jb(r.w),c.Jb(s.a),c.Jb(r.a),c.Jb(l.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-settings"]],decls:54,vars:4,consts:[["color","primary"],["slot","start"],["defaultHref","/home"],[1,"settings-list"],["color","primary","name","heart","slot","start"],["slot","end","fill","outline",3,"click"],["color","primary","name","logo-facebook","slot","start"],["color","primary","name","mail","slot","start"],["color","primary","name","information-circle","slot","start"],["slot","end","fill","outline","routerDirection","forward",3,"routerLink"],["color","primary","name","alert-circle","slot","start"],["routerDirection","forward","detail","",3,"routerLink"],["color","primary","name","wallet","slot","start"],["detail","",3,"click"],["color","primary","name","swap-horizontal","slot","start"],["color","primary","name","at-circle","slot","start"],["color","primary","name","lock-open","slot","start"]],template:function(e,t){1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar",0),c.Mb(2,"ion-title"),c.ic(3,"Settings"),c.Lb(),c.Mb(4,"ion-buttons",1),c.Mb(5,"ion-button"),c.Kb(6,"ion-back-button",2),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"ion-list",3),c.Mb(9,"ion-list-header"),c.ic(10,"Support"),c.Lb(),c.Mb(11,"ion-item"),c.Kb(12,"ion-icon",4),c.ic(13," Rate The App "),c.Mb(14,"ion-button",5),c.Ub("click",function(){return t.openRate()}),c.ic(15,"Rate"),c.Lb(),c.Lb(),c.Mb(16,"ion-item"),c.Kb(17,"ion-icon",6),c.ic(18," Follow Us "),c.Mb(19,"ion-button",5),c.Ub("click",function(){return t.openFollow()}),c.ic(20,"Follow"),c.Lb(),c.Lb(),c.Mb(21,"ion-item"),c.Kb(22,"ion-icon",7),c.ic(23," Contact Support "),c.Mb(24,"ion-button",5),c.Ub("click",function(){return t.openEmail()}),c.ic(25,"Email"),c.Lb(),c.Lb(),c.Mb(26,"ion-item"),c.Kb(27,"ion-icon",8),c.ic(28," Introduction "),c.Mb(29,"ion-button",9),c.ic(30,"View"),c.Lb(),c.Lb(),c.Mb(31,"ion-item"),c.Kb(32,"ion-icon",10),c.ic(33," Disclaimer "),c.Mb(34,"ion-button",5),c.Ub("click",function(){return t.openDisclaimer()}),c.ic(35,"View"),c.Lb(),c.Lb(),c.Mb(36,"ion-list-header"),c.ic(37,"Account"),c.Lb(),c.Mb(38,"ion-item",11),c.Kb(39,"ion-icon",12),c.Mb(40,"ion-label"),c.ic(41,"My Purchases"),c.Lb(),c.Lb(),c.Mb(42,"ion-item",13),c.Ub("click",function(){return t.openSwitchAccount()}),c.Kb(43,"ion-icon",14),c.Mb(44,"ion-label"),c.ic(45,"Switch Account"),c.Lb(),c.Lb(),c.Mb(46,"ion-item",13),c.Ub("click",function(){return t.openChangeEmail()}),c.Kb(47,"ion-icon",15),c.Mb(48,"ion-label"),c.ic(49,"Change Email"),c.Lb(),c.Lb(),c.Mb(50,"ion-item",13),c.Ub("click",function(){return t.openChangePassword()}),c.Kb(51,"ion-icon",16),c.Mb(52,"ion-label"),c.ic(53,"Change Password"),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.zb(29),c.Zb("routerLink",c.bc(2,u)),c.zb(9),c.Zb("routerLink",c.bc(3,h)))},directives:[r.j,r.s,r.r,r.g,r.f,r.d,r.e,r.h,r.n,r.o,r.l,r.k,r.x,a.h,r.m],styles:[".settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:10px;margin-top:20px;padding-top:10px}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]:first-child{margin-top:0;padding-top:0}.settings-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-bottom:0}"]}),e}()}],m=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({imports:[[a.i.forChild(p)],a.i]}),e}(),b=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({imports:[[o.b,i.a,r.t,m]]}),e}()}}]);